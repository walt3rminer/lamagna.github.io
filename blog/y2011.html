<html>
<head>
<title>Year 2011</title>
<link rel="stylesheet" type="text/css" href="css/blogstyle.css">
</head>
<body style="margin:20;padding:0;">
<script language="javascript">
window.parent.document.title = "Year 2011";
</script>
<div id="section"><p id="postTitle">How to obtain the flash videos in Firefox 4</p>
<p> Flash videos were stored in /tmp/FlashXXXX and i was able to copy them to another place like cp /tmp/FlashXXX ~/Desktop/new.video.mpeg.<br /><br /> Since Firefox 4 i thought for a moment that everything changed and my happy days were over but i was wrong, i remembered that with Linux there are no sad days.<br /><br /> How to obtain the flash videos with Firefox 4:<br /><br /> When the video already finished loading in the browser (being Youtube or any other), do this:<br /><br /><div style="font-family: &quot;Courier New&quot;,Courier,monospace;">ps -ef | grep libflashplayer.so | grep -v grep </div><br /><span style="font-family: &quot;Courier New&quot;,Courier,monospace; font-size: small;">walter&nbsp;&nbsp; 20040 19812&nbsp; 9 11:52 ?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 00:53:34 /usr/lib/firefox-3.6.17/plugin-container /home/walter/.mozilla/plugins/libflashplayer.so 19812 plugin true</span><br /><br /> Now, with the PID, inspect what it is opening:<br /><br /><br /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">root@talento:~# lsof -p 20040 | grep Flash</span><br /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">lsof: WARNING: can&#39;t stat() fuse.gvfs-fuse-daemon file system /home/walter/.gvfs</span><br /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Output information may be incomplete.</span><br /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">plugin-co 20040 walter&nbsp;&nbsp; 16u&nbsp;&nbsp; REG&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 8,2&nbsp; 1249930 21708868 /tmp/FlashXXQANNm2 (deleted)</span><br /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">root@talento:~# </span><br /><br /> You are interested in the file descriptor id, these are the file descriptors from that process:<br /><br /><br /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">root@talento:~# ls -la /proc/20040/fd/</span><br /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">total 0</span><br /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">dr-x------ 2 walter walter&nbsp; 0 2011-04-30 21:12 .</span><br /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">dr-xr-xr-x 7 walter walter&nbsp; 0 2011-04-30 21:06 ..</span><br /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">lr-x------ 1 walter walter 64 2011-04-30 21:12 0 -&gt; /dev/null</span><br /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">lrwx------ 1 walter walter 64 2011-04-30 21:12 1 -&gt; /home/walter/.xsession-errors</span><br /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">l-wx------ 1 walter walter 64 2011-04-30 21:12 10 -&gt; pipe:[18679239]</span><br /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">lr-x------ 1 walter walter 64 2011-04-30 21:12 11 -&gt; pipe:[18679240]</span><br /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">l-wx------ 1 walter walter 64 2011-04-30 21:12 12 -&gt; pipe:[18679240]</span><br /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">lrwx------ 1 walter walter 64 2011-04-30 21:12 13 -&gt; socket:[18679243]</span><br /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">lr-x------ 1 walter walter 64 2011-04-30 21:12 14 -&gt; /home/walter/.mozilla/firefox/2te1hj2x.default/cert8.db</span><br /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">lr-x------ 1 walter walter 64 2011-04-30 21:12 15 -&gt; /home/walter/.mozilla/firefox/2te1hj2x.default/key3.db</span><br /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">lrwx------ 1 walter walter 64 2011-04-30 21:15 16 -&gt; /tmp/FlashXXQANNm2 (deleted)</span><br /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">lr-x------ 1 walter walter 64 2011-04-30 21:16 17 -&gt; pipe:[19890054]</span><br /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">l-wx------ 1 walter walter 64 2011-04-30 21:16 18 -&gt; pipe:[19890054]</span><br /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">lr-x------ 1 walter walter 64 2011-04-30 21:16 19 -&gt; pipe:[19890055]</span><br /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">lrwx------ 1 walter walter 64 2011-04-30 21:12 2 -&gt; /home/walter/.xsession-errors</span><br /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">l-wx------ 1 walter walter 64 2011-04-30 21:16 20 -&gt; pipe:[19890055]</span><br /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">lrwx------ 1 walter walter 64 2011-04-30 21:16 21 -&gt; socket:[19890059]</span><br /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">lrwx------ 1 walter walter 64 2011-04-30 21:12 22 -&gt; socket:[19338003]</span><br /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">lr-x------ 1 walter walter 64 2011-04-30 21:12 23 -&gt; anon_inode:inotify</span><br /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">lrwx------ 1 walter walter 64 2011-04-30 21:12 3 -&gt; socket:[18679123]</span><br /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">lrwx------ 1 walter walter 64 2011-04-30 21:12 4 -&gt; anon_inode:[eventpoll]</span><br /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">lrwx------ 1 walter walter 64 2011-04-30 21:12 42 -&gt; socket:[18679124]</span><br /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">lrwx------ 1 walter walter 64 2011-04-30 21:12 5 -&gt; socket:[18679236]</span><br /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">lrwx------ 1 walter walter 64 2011-04-30 21:12 6 -&gt; socket:[18679237]</span><br /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">lr-x------ 1 walter walter 64 2011-04-30 21:12 7 -&gt; pipe:[18679238]</span><br /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">l-wx------ 1 walter walter 64 2011-04-30 21:12 8 -&gt; pipe:[18679238]</span><br /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">lr-x------ 1 walter walter 64 2011-04-30 21:12 9 -&gt; pipe:[18679239]</span><br /><br /> What is of our interest if the Flash process, displayed in the previous lines.<br /><br /> Now, you can copy the file to a safe place, because, if you close Firefox, those files are released and lost.<br /><br /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">cp /proc/20040/fd/16 ~/Desktop/A.Movie.mpeg</span><br /><br /> Now if you want to put everything in a script:<br /><br /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">root@talento:~# cat saveflash.sh </span><br /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">#!/bin/bash</span><br /><br /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">PID=`ps -ef | grep libflashplayer.so | grep -v grep | awk &#39;{print $2}&#39;`</span><br /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">FD=`lsof -p $PID | grep Flash | awk &#39;{print $4}&#39; | sed &#39;s/u$//&#39;`</span><br /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">cp /proc/$PID/fd/$FD &quot;$1&quot;</span><br /><br /> And remember, you can &quot;invite me a coffee&quot; :) <div style="clear: both;"></div>
<b>Published: Saturday, April 30, 2011</b>

<hr>
</body></html>
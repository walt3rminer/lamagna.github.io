<html>
<head>
<title>Configure ttysnoop with SSH in Suse Or Redhat Linux</title>
<link rel="stylesheet" type="text/css" href="css/blogstyle.css">
</head>
<body style="margin:20;padding:0;">
<script language="javascript">
window.parent.document.title = "Configure ttysnoop with SSH in Suse Or Redhat Linux";
</script>
<div id="section"><p id="postTitle">Configure ttysnoop with SSH in Suse Or Redhat Linux</p>
<p> This time a nice administrator tool called TTYSNOOP, it permits to watch what other persons are doing in other terminals. Usefull for security people.<br /><br /><span style="font-weight: bold;">Steps:</span><br />1) Download openssh from http://openbsd.md5.com.ar/pub/OpenBSD/OpenSSH/portable/<br />wget http://openbsd.md5.com.ar/pub/OpenBSD/OpenSSH/portable/openssh-4.6p1.tar.gz<br />2) Uncompress it<br />tar zxvf openssh-4.6p1.tar.gz<br />3) Compile it, you have to set the &quot;login&quot; program that ssh has to use !<br />cd openssh-4.6p1<br />export LOGIN_PROGRAM=&quot;/sbin/foo_login&quot;<br />cd openssh-4.6p1<br />./configure --prefix=/usr --sysconfdir=/etc/ssh --without-zlib-version-check --with-pam --with-tcp-wrappers<br />make<br />make install<br /><br />4) Modify the sshd_config file, should be located in /etc/ssh/sshd_config and change these variables:<br /><span style="font-family:courier new;">PasswordAuthentication yes</span><br /><span style="font-family:courier new;">UseLogin yes</span><b><br /><br />Compile ttysnoop<br /></b>5) Download ttysnoop from http://freshmeat.net/redir/ttysnoop26/<br /><span style="font-size:85%;"><span style="font-family:courier new;">wget http://freshmeat.net/redir/ttysnoop26/50871/url_tgz/ttysnoop-0.12d.k26.tar.gz</span><br /><span style="font-family:courier new;">6) tar xzvf ttysnoop-0.12d.k26.tar.gz</span><br /><span style="font-family:courier new;">7) cd ttysnoop-0.12d.k26</span><br /><span style="font-family:courier new;">8) make</span><br /><span style="font-family:courier new;">9) make install</span></span><br /><br />10) Copy the new login from ttysnoop:<br /><span style="font-size:85%;"><span style="font-family:courier new;">cp ttysnoops /sbin/foo_login</span></span><br />11) This directory is not created, you have to do it:<br /><span style="font-size:85%;"><span style="font-family:courier new;">mkdir /var/spool/ttysnoop</span></span><br /><br />12) copy snooptab.dist to /etc<br /><span style="font-size:85%;"><span style="font-family:courier new;">cp snooptab.dist /etc/snooptab</span></span><br /><br />13) Edit /etc/snooptab<br />Comment all lines except:<br /><span style="font-size:85%;"><span style="font-family:courier new;">* socket login /bin/login</span></span><br /><br />Now you can use it:<br /><span style="font-size:85%;"><span style="font-family: courier new;">#w</span><br /><span style="font-family: courier new;">wlamagna pts/1 192.168.2.20 16:51 0.00s 1:42 0.01s login -- wlamagna</span><br /><span style="font-family: courier new;"><br /><span style="font-size:100%;"><span style="font-family: times new roman;">In another terminal write this to snoop terminal 1.</span></span><br />#ttysnoop 1<br /><br /></span><br /></span>Now you are ready to use ttysnoop :-) Please leave your comment with experiences. <div style="clear: both;"></div>
<b>Published: Wednesday, April 25, 2007</b>

<hr>
</body></html>
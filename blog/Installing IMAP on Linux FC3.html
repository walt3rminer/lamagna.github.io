<html>
<head>
<title>Installing IMAP on Linux FC3</title>
<link rel="stylesheet" type="text/css" href="css/blogstyle.css">
</head>
<body style="margin:20;padding:0;">
<script language="javascript">
window.parent.document.title = "Installing IMAP on Linux FC3";
</script>
<div id="section"><p id="postTitle">Installing IMAP on Linux FC3</p>
<p><span style="font-weight: bold;font-size:85%;">I want to install IMAP on Linux because:</span><span style="font-size:85%;"><br /></span><ul><li><span style="font-size:85%;">The webmail programms able to create folders with IMAP and not with POP3.</span></ul><ul><li><span style="font-size:85%;">IMAP is better.</span></ul><ul><li><span style="font-size:85%;">I think it is better idea to install IMAP than adding code to an existing webmail solution.</span></ul><span style="font-weight: bold;font-family:arial;font-size:85%;">I tryed to install Cyrus imap that comes with Fedora, but i had many problems.</span><br /><span style="font-size:85%;"><span style="font-family:courier new;">master[12190]: retrying with 1024 (current max)<br />master[12190]: can&#39;t open pidfile: Bad file descriptor<br />master[12192]: setrlimit: Unable to set file descriptors limit to -1: Operation not permitted<br />master[12192]: retrying with 1024 (current max)<br />master[12192]: can&#39;t open pidfile: Bad file descriptor<br /></span></span><ul style="font-family:arial;"><li><span style="font-size:85%;"><span style="">And imapd do not working with xinetd, and db4 with errors in lastlog:</span></span></ul><span style="font-size:85%;"><span style="font-family:courier new;">lmtpunix[23898]: DBERROR: opening /var/lib/imap/deliver.db: cyrusdb error<br />lmtpunix[23898]: FATAL: lmtpd: unable to init duplicate delivery database<br />master[17437]: process 23898 exited, status 75<br />master[17437]: service lmtpunix pid 23898 in READY state: terminated abnormally<br /><br />lmtpunix[23898]: DBERROR: opening /var/lib/imap/deliver.db: cyrusdb error<br />lmtpunix[23898]: FATAL: lmtpd: unable to init duplicate delivery database<br />master[17437]: process 23898 exited, status 75<br />master[17437]: service lmtpunix pid 23898 in READY state: terminated abnormally<br /><br /><span style="font-family:arial;">There are no solutions in Internet for these problems, so i decided to install Washington IMAP.</span><br /><span style="font-family:arial;">http://www.washington.edu/imap/<br /><br />These where the steps in Linux:<br /><br /><span style="font-size:85%;"><span style="font-family:courier new;">$ mkdir /tmp/imap</span><br /><span style="font-family:courier new;">$ cd /tmp/imap</span><br /><span style="font-family:courier new;">$ lynx ftp://ftp.cac.washington.edu/mail/imap.tar.Z</span><br /><span style="font-family:courier new;">$ tar zxvf imap.tar.Z</span><br /><span style="font-family:courier new;">$ cd imap-2004g/<br /><br /></span></span>(Look inside Makefile and see what argument you need to give to the make command, i use &quot;rhl&quot; because it is Redhat or Later)<br /><br /></span></span></span><span style="font-size:85%;"><span style="font-family:courier new;">$ make rhl</span><br /><span style="font-family:courier new;">$ install -s -m 755 -o root -g mail imapd/imapd /usr/sbin</span></span><br /><span style="font-size:85%;"><span style="font-family:courier new;"><span style="font-family:arial;"><br />Create an /etc/xinetd.d/imap file:<br /><br /><span style="font-family:courier new;">service imap</span><br /><span style="font-family:courier new;">{</span><br /><span style="font-family:courier new;"> disable = no</span><br /><span style="font-family:courier new;"> socket_type = stream</span><br /><span style="font-family:courier new;"> server = /usr/sbin/imapd</span><br /><span style="font-family:courier new;"> protocol = tcp</span><br /><span style="font-family:courier new;"> user = root</span><br /><span style="font-family:courier new;"> wait = no</span><br /><span style="font-family:courier new;">}</span><br /></span></span></span> <pre><span style="font-size:85%;">$ killall -HUP inetd</span><span style="font-family:georgia,serif;"><span style="font-size:85%;"><br /></span><br /><span style="font-family:courier new;">[root@monitor1 imap-2004g]# telnet localhost imap</span><br /><span style="font-family:courier new;">Trying 127.0.0.1...</span><br /><span style="font-family:courier new;">Connected to xxx.walterlamagna.com.ar (127.0.0.1).</span><br /><span style="font-family:courier new;">Escape character is &#39;^]&#39;.</span><br /><span style="font-family:courier new;">* OK [CAPABILITY IMAP4REV1 LITERAL+ SASL-IR LOGIN-</span><br /><span style="font-family:courier new;">REFERRALS STARTTLS LOGINDISABLED] localhost IMAP4</span><br /><span style="font-family:courier new;">rev1 2004.357 at Sat, 5 Nov 2005 23:07:15 -0300 (ART)</span><br /><br />Excelent, IMAP is working !!<br /><br /><span style="font-family:arial;">Now you would probably get this error in /etc/messages when you try to login:</span><br /><span style="font-family:courier new;">imapd[14370]: Login disabled user=pepito auth=pepito host=localhost [127.0.0.1]</span><br /><br /><span style="font-family:arial;">And when you: telnet localhost imap, you will probably see </span></span><span style="font-family:arial;">LOGINDISABLED.</span><br /><span style="font-family:arial;">This is because you compiled imap with the option:</span><br /><span style="font-family:courier new;">SSLTYPE=nopwd</span><br /><br />If you do not want to use SSL, just plain passwords, you have<br />to change the Makefile and change SSLTYPE=nopwd for SSLTYPE=none.<br />And recompile.<br />Restart xinetd<br /><br />And now i should work :)<br /></pre><div style="clear: both;"></div>
<b>Published: Saturday, November 05, 2005</b>
<a href="tag_linux">linux</a>&nbsp;<a href="tag_admin">admin</a>&nbsp;<a href="tag_apache">apache</a>&nbsp;
<hr>
</body></html>
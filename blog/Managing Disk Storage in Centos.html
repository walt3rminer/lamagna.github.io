<html>
<head>
<title>Managing Disk Storage in Centos</title>
<link rel="stylesheet" type="text/css" href="css/blogstyle.css">
</head>
<body>
<script language="javascript">
window.parent.document.title = "Managing Disk Storage in Centos";
</script>
<div id="section"><p id="postTitle">Managing Disk Storage in Centos</p>
<p><div class="toc"><br /><dl><dt><span class="section"><a href="#">Standard Partitions using parted</a> </span><dt><span class="section"><a href="#">LVM Partition Management</a></span><dt><span class="section">&nbsp;</span></dl>By default, the <tt class="filename">parted</tt> package is included when installing Red Hat Enterprise Linux. To start <tt class="command">parted</tt>, log in as root and type the command <tt class="command">parted <i class="replaceable"><tt>/dev/sda</tt></i></tt> at a shell prompt (where <tt class="command"><i class="replaceable"><tt>/dev/sda</tt></i></tt> is the device name for the drive you want to configure).<br /> A device containing a partition must not be in use if said partition is to be removed or resized. Similarly, when creating a new partition on a device, said device must not be in use.<br /> For a device to not be in use, none of the partitions on the device can be mounted, and any swap space on the device must not be enabled.<br /> As well, the partition table should not be modified while it is in use because the kernel may not properly recognize the changes. If the partition table does not match the actual state of the mounted partitions, information could be written to the wrong partition, resulting in lost and overwritten data.<br /> The easiest way to achieve this it to boot your system in rescue mode. When prompted to mount the file system, select <span><b class="guibutton">Skip</b></span>.<br /> Alternately, if the drive does not contain any partitions in use (system processes that use or lock the file system from being unmounted), you can unmount them with the <tt class="command">umount</tt> command and turn off all the swap space on the hard drive with the <tt class="command">swapoff</tt> command. <br /><a href="#" title="Table&nbsp;6.1.&nbsp;parted  commands">Table&nbsp;6.1, &ldquo;parted commands&rdquo;</a> contains a list of commonly used <tt class="command">parted</tt> commands. The sections that follow explain some of these commands and arguments in more detail.<br /><br /><br /><table border="1" summary="parted  commands"><thead><tr><th>Command </th><th> Description </th></tr></thead><tbody><tr><td><tt class="command">check <i class="replaceable"><tt>minor-num</tt></i></tt></td><td> Perform a simple check of the file system </td></tr><tr><td><tt class="command">cp <i class="replaceable"><tt>from</tt></i> <i class="replaceable"><tt>to</tt></i></tt></td><td> Copy file system from one partition to another; <i class="replaceable"><tt>from</tt></i> and <i class="replaceable"><tt>to</tt></i> are the minor numbers of the partitions </td></tr><tr><td><tt class="command">help</tt></td><td> Display list of available commands </td></tr><tr><td><tt class="command">mktable <i class="replaceable"><tt>label</tt></i></tt></td><td> Create a disk label for the partition table </td></tr><tr><td><tt class="command">mkfs <i class="replaceable"><tt>minor-num</tt></i> <i class="replaceable"><tt>file-system-type</tt></i></tt></td><td> Create a file system of type <i class="replaceable"><tt>file-system-type</tt></i></td></tr><tr><td><tt class="command">mkpart <i class="replaceable"><tt>part-type</tt></i> <i class="replaceable"><tt>fs-type</tt></i> <i class="replaceable"><tt>start-mb</tt></i> <i class="replaceable"><tt>end-mb</tt></i></tt></td><td> Make a partition without creating a new file system </td></tr><tr><td><tt class="command">mkpartfs <i class="replaceable"><tt>part-type</tt></i> <i class="replaceable"><tt>fs-type</tt></i> <i class="replaceable"><tt>start-mb</tt></i> <i class="replaceable"><tt>end-mb</tt></i></tt></td><td> Make a partition and create the specified file system </td></tr><tr><td><tt class="command">move <i class="replaceable"><tt>minor-num</tt></i> <i class="replaceable"><tt>start-mb</tt></i> <i class="replaceable"><tt>end-mb</tt></i></tt></td><td> Move the partition </td></tr><tr><td><tt class="command">name <i class="replaceable"><tt>minor-num</tt></i> <i class="replaceable"><tt>name</tt></i></tt></td><td> Name the partition for Mac and PC98 disklabels only </td></tr><tr><td><tt class="command">print</tt></td><td> Display the partition table </td></tr><tr><td><tt class="command">quit</tt></td><td> Quit <tt class="command">parted</tt></td></tr><tr><td><tt class="command">rescue</tt> <i class="replaceable"> <tt>start-mb</tt> </i> <i class="replaceable"> <tt>end-mb</tt> </i></td><td> Rescue a lost partition from <i class="replaceable"><tt>start-mb</tt></i> to <i class="replaceable"><tt>end-mb</tt></i></td></tr><tr><td><tt class="command">resize <i class="replaceable"><tt>minor-num</tt></i> <i class="replaceable"><tt>start-mb</tt></i> <i class="replaceable"><tt>end-mb</tt></i></tt></td><td> Resize the partition from <i class="replaceable"><tt>start-mb</tt></i> to <i class="replaceable"><tt>end-mb</tt></i></td></tr><tr><td><tt class="command">rm <i class="replaceable"><tt>minor-num</tt></i></tt></td><td> Remove the partition </td></tr><tr><td><tt class="command">select <i class="replaceable"><tt>device</tt></i></tt></td><td> Select a different device to configure </td></tr><tr><td><tt class="command">set <i class="replaceable"><tt>minor-num</tt></i> <i class="replaceable"><tt>flag</tt></i> <i class="replaceable"><tt>state</tt></i></tt></td><td> Set the flag on a partition; <i class="replaceable"><tt>state</tt></i> is either on or off </td></tr><tr><td><tt class="command">toggle [<i class="replaceable"><tt>NUMBER</tt></i> [<i class="replaceable"><tt>FLAG</tt></i>]</tt></td><td> Toggle the state of <i class="replaceable"><tt>FLAG</tt></i> on partition <i class="replaceable"><tt>NUMBER</tt></i></td></tr><tr><td><tt class="command">unit <i class="replaceable"><tt>UNIT</tt></i></tt></td><td> Set the default unit to <i class="replaceable"><tt>UNIT</tt></i></td></tr></tbody></table><h3 class="title">Viewing the Partition Table</h3>After starting <tt class="command">parted</tt>, use the command <tt class="command">print</tt> to view the partition table. A table similar to the following appears: <br /><pre class="screen">Model: ATA ST3160812AS (scsi)<br>Disk /dev/sda: 160GB<br>Sector size (logical/physical): 512B/512B<br>Partition Table: msdos<br><br>Number  Start   End    Size    Type      File system  Flags<br> 1      32.3kB  107MB  107MB   primary   ext3         boot<br> 2      107MB   105GB  105GB   primary   ext3<br> 3      105GB   107GB  2147MB  primary   linux-swap<br> 4      107GB   160GB  52.9GB  extended        root<br> 5      107GB   133GB  26.2GB  logical   ext3<br> 6      133GB   133GB  107MB   logical   ext3<br> 7      133GB   160GB  26.6GB  logical                lvm<br></pre>The first line contains the disk type, manufacturer, model number and interface, and the second line displays the disk label type. The remaining output below the fourth line shows the partition table. <br /> In the partition table, the <i class="firstterm">Minor</i> number is the partition <tt class="computeroutput">number</tt>. For example, the partition with minor number 1 corresponds to <tt class="filename">/dev/sda1</tt>. The <tt class="computeroutput">Start</tt> and <tt class="computeroutput">End</tt> values are in megabytes. Valid <tt class="computeroutput">Type</tt> are metadata, free, primary, extended, or logical. The <tt class="computeroutput">Filesystem</tt> is the file system type, which can be any of the following:<br /><div class="itemizedlist"><ul><li> ext2<br /><li> ext3<br /><li> fat16<br /><li> fat32<br /><li> hfs<br /><li> jfs<br /><li> linux-swap<br /><li> ntfs<br /><li> reiserfs<br /><li> hp-ufs<br /><li> sun-ufs<br /><li> xfs<br /></ul></div>If a <tt class="computeroutput">Filesystem</tt> of a device shows no value, this means that its file system type is unknown.<br /> The <span><b class="guilabel">Flags</b></span> column lists the flags set for the partition. Available flags are boot, root, swap, hidden, raid, lvm, or lba. <br /></div><div style="clear: both;"></div>
<b>Published: Sunday, December 06, 2009</b>
<hr>
</body></html>
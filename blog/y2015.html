<html>
<head>
<title>Year 2015</title>
<link rel="stylesheet" type="text/css" href="css/blogstyle.css">
</head>
<body style="margin:20;padding:0;">
<script language="javascript">
window.parent.document.title = "Year 2015";
</script>
<div id="section">
<p id="postTitle">Secure Debian Post Install configuration</p>
In this <a href="http://blog.wallves.com/Some%20linux%20firewall%20tips.html">short article</a> i share some short
but powerfull firewall logging tip.  Now i tell a little about some Debian post installation instructions i would
commonly recommend.
<br />
Download the last stable Debian from <a href="https://www.debian.org/CD/http-ftp/#stable">here</a><br /><br />

When you just install the last Debian you may have something more or less like this:<br />

<pre>
root@host1:~# netstat --listen -np
<span style="color: #888888">Active Internet connections (only servers)</span>
<span style="color: #888888">Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name</span>
<span style="color: #888888">tcp        0      0 0.0.0.0:111             0.0.0.0:*               LISTEN      397/rpcbind     </span>
<span style="color: #888888">tcp        0      0 127.0.0.1:631           0.0.0.0:*               LISTEN      445/cupsd       </span>
<span style="color: #888888">tcp        0      0 127.0.0.1:25            0.0.0.0:*               LISTEN      696/exim4       </span>
<span style="color: #888888">tcp        0      0 0.0.0.0:38845           0.0.0.0:*               LISTEN      406/rpc.statd   </span>
<span style="color: #888888">tcp6       0      0 :::111                  :::*                    LISTEN      397/rpcbind     </span>
<span style="color: #888888">tcp6       0      0 :::48180                :::*                    LISTEN      406/rpc.statd   </span>
<span style="color: #888888">tcp6       0      0 ::1:631                 :::*                    LISTEN      445/cupsd       </span>
<span style="color: #888888">tcp6       0      0 ::1:25                  :::*                    LISTEN      696/exim4       </span>
<span style="color: #888888">udp        0      0 0.0.0.0:996             0.0.0.0:*                           397/rpcbind     </span>
<span style="color: #888888">udp        0      0 0.0.0.0:5353            0.0.0.0:*                           427/avahi-daemon: r</span>
<span style="color: #888888">udp        0      0 127.0.0.1:1006          0.0.0.0:*                           406/rpc.statd   </span>
<span style="color: #888888">udp        0      0 0.0.0.0:42504           0.0.0.0:*                           427/avahi-daemon: r</span>
<span style="color: #888888">udp        0      0 0.0.0.0:68              0.0.0.0:*                           356/dhclient    </span>
<span style="color: #888888">udp        0      0 0.0.0.0:50762           0.0.0.0:*                           356/dhclient    </span>
<span style="color: #888888">udp        0      0 0.0.0.0:111             0.0.0.0:*                           397/rpcbind     </span>
<span style="color: #888888">udp        0      0 0.0.0.0:631             0.0.0.0:*                           448/cups-browsed</span>
<span style="color: #888888">udp        0      0 0.0.0.0:49788           0.0.0.0:*                           406/rpc.statd   </span>
<span style="color: #888888">udp6       0      0 :::996                  :::*                                397/rpcbind     </span>
<span style="color: #888888">udp6       0      0 :::5353                 :::*                                427/avahi-daemon: r</span>
<span style="color: #888888">udp6       0      0 :::59218                :::*                                406/rpc.statd   </span>
<span style="color: #888888">udp6       0      0 :::14952                :::*                                356/dhclient    </span>
<span style="color: #888888">udp6       0      0 :::111                  :::*                                397/rpcbind     </span>
<span style="color: #888888">udp6       0      0 :::60837                :::*                                427/avahi-daemon: r</span>
</pre>

If you are a security conscious administrator, then you agree here is work do to.  Not only to have a safer
workplace, also to reduce the cpu and memory usage!<br /><br />

<pre>
apt-get remove exim4-*</span>
<span style="color: #888888">apt-get remove rpcbind</span>
<span style="color: #888888">apt-get remove avahi-daemon</span>
<span style="color: #888888">apt-get remove cups</span>
<span style="color: #888888">apt-get remove cups-browsed</span>
<span style="color: #888888">apt-get remove cups-daemon</span>
</pre></div>

Now you would have a clearner list of network listening services.<br />


<div style="clear: both;"></div>
<b>Published: Monday, October 12, 2015</b>
<a href="tag_linux">linux</a>&nbsp;<a href="tag_security">security</a>&nbsp;
</div>

<hr>
<div id="section">
<p id="postTitle">Debian 8 Post Install Cleanup</p>
In this <a href="http://blog.wallves.com/Some%20linux%20firewall%20tips.html">short article</a> i share some short
but powerfull firewall logging tip.  And <a href="http://blog.wallves.com/Secure%20Debian%20Post%20Install%20configuration.html">
here</a> security related post install removals for Debian.<br />
What is next? Lets keep cleaning and removing software!<br /><br />

Almost with Debian 8 these uninstalls haven't caused any issues with other programs,
but check what it is uninstalling first !  These recommendations are for server oriented
installations and not so much for workstations, but you can do it if you know
what you are doing.<br /><br />

<pre>
apt-get remove exim4-*</span>
<span style="color: #888888">apt-get remove tracker</span>
<span style="color: #888888">apt-get remove gnome-online-miners</span>
</pre>


<div style="clear: both;"></div>
<b>Published: Monday, October 12, 2015</b>
<a href="tag_security">security</a>&nbsp;
</div>

<hr>
<div id="section">
<p id="postTitle">Some linux firewall tips</p>
The overconnected world needs some extra knowledge about protecting yourself from anti-democracy financed cyber-bandits,
so here some small but powerfull firewall setup tips:<br />
<br />
<b><u>Firewall setup:</u></b>
<pre>
<span style="color: #888888">iptables -F </span>
<span style="color: #888888">iptables -P INPUT DROP </span>
<span style="color: #888888">iptables -P OUTPUT DROP </span>
<span style="color: #888888">iptables -P FORWARD DROP </span>
<span style="color: #888888"># There is no return once you know these logging lines: </span>
<span style="color: #888888">iptables -A INPUT -p icmp -m limit -j LOG --log-prefix &quot;ICMP/IN: &quot; </span>
<span style="color: #888888">iptables -A OUTPUT -p icmp -m limit -j LOG --log-prefix &quot;ICMP/OUT: &quot; </span>
<span style="color: #888888">iptables -A INPUT -p tcp -m limit -j LOG --log-prefix &quot;TCP/IN: &quot; </span>
<span style="color: #888888">iptables -A OUTPUT -p tcp -m limit -j LOG --log-prefix &quot;TCP/OUT: &quot; </span>
<span style="color: #888888">iptables -A INPUT -p udp -m limit -j LOG --log-prefix &quot;UDP/OUT: &quot; </span>
<span style="color: #888888">iptables -A OUTPUT -p udp -m limit -j LOG --log-prefix &quot;UDP/OUT: &quot; </span>
</pre>
<br />
<b><u>Syslog setup, typically /etc/rsyslog.d/iptables.conf</u></b><br />
<pre>
:msg,contains,&quot;ICMP/IN:&quot; /var/log/iptables.log</span>
<span style="color: #888888">:msg,contains,&quot;ICMP/OUT:&quot; /var/log/iptables.log</span>
<span style="color: #888888">:msg,contains,&quot;TCP/IN:&quot; /var/log/iptables.log</span>
<span style="color: #888888">:msg,contains,&quot;TCP/OUT:&quot; /var/log/iptables.log</span>
<span style="color: #888888">:msg,contains,&quot;UDP/IN:&quot; /var/log/iptables.log</span>
<span style="color: #888888">:msg,contains,&quot;UDP/OUT:&quot; /var/log/iptables.log</span>
</pre></div>
<br />
<b><u>Restarting service</u></b><br />
/etc/init.d/rsyslog restart

<div style="clear: both;"></div>
<b>Published: Sunday, October 11, 2015</b>
<a href="tag_security">security</a>&nbsp;<a href="tag_linux">linux</a>&nbsp;
</div>

<hr>
<div id="section">
<p id="postTitle">Firefox starts a server on port 1900</p>
 I observed this kind of packets being filtered in my place:<br /><br /><b>
<pre>
Mar 17 13:13:21 reserved kernel: [15070.046566] UDP/OUT: IN= OUT=eth1 SRC=10.10.10.176 DST=239.255.255.250 LEN=122 TOS=0x00 PREC=0x00 TTL=1 ID=17655 DF PROTO=UDP SPT=1900 DPT=1900 LEN=102
</pre>
<br /><br /><br />
And for just one moment, because it starts and stops very quicky i found this:
<br /><br /><br />
<pre>
root@reserved:~# netstat --listen -np
Active Internet connections (only servers)
Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name
udp        0      0 0.0.0.0:1900            0.0.0.0:*                           5615/firefox
</pre>
<br />
To disable this go to about:config and then set<br /> loop.enabled -&gt; false<br /><br /> loop.rooms.enabled -&gt; false<br /><br /> Good luck. <div style="clear: both;"></div>
<b>Published: Tuesday, March 17, 2015</b>
<a href="tag_security">security</a>&nbsp;
</div>

<hr>
<div id="section">
<p id="postTitle">Compile keepass 0.4.3 on Debian Linux wheezy</p>
 I have switched from Ubuntu to Debian, and am happy i did so.
There are enough blogs talking about their pros and i only ask why i did it not before.

<br /><br /><br /> 
Well, when you wish to compile keepassx on Debian you may 
find one or two obstacles, i hope this post targets them 
and saves you some time.
<br /><br /><br />
Get It:<br /> 
<pre>
wget http://www.keepassx.org/releases/keepassx-0.4.3.tar.gz
tar zxvf keepassx-0.4.3.tar.gz
cd keepassx-0.4.3/
mkdir build
</pre>
I recommend you to read the INSTALL file<br />
<pre>
apt-get install libqt4-dev
apt-get install libx11-dev
apt-get install libx11-dev
</pre>
And finally you have to install this one:<br />
<pre>
apt-get install libxtst-dev
</pre>
Yes, it do not leaves you given dependencies, 
i fixed it this way:
<pre>
wget http://ftp.de.debian.org/debian/pool/main/x/x11proto-record/x11proto-record-dev_1.14.2-1_all.deb
dpkg -i x11proto-record-dev_1.14.2-1_all.deb
</pre>
And now you go!
<pre>
apt-get instal libxtst-dev
qmake
make
</pre>
And again, second challenge, you may find this 
message trying to compile:
<pre>
lib/random.cpp: In function [void initStdRand()]:
lib/random.cpp:98:19: error: [getpid] was not declared in this scope
</pre>
I did this:
<pre>
vi ./src/lib/random.cpp
</pre>
Basically you just modify the file, before it looks like:
<pre>
#include "random.h"
#if defined(Q_WS_X11) || defined(Q_WS_MAC)
#include <QFile>
</pre>

And it should look like:

<pre>
#include "random.h"
#include &lt;unistd.h&gt;
#if defined(Q_WS_X11) || defined(Q_WS_MAC)
#include <QFile>
</pre>

<div style="clear: both;"></div>
<b>Published: Wednesday, March 11, 2015</b>
<a href="tag_admin">admin</a>&nbsp;<a href="tag_security">security</a>&nbsp;<a href="tag_linux">linux</a>&nbsp;
</div>

<hr>
</body></html>
<html>
<head>
<title>Adding and quiting services with chkconfig</title>
<link rel="stylesheet" type="text/css" href="css/blogstyle.css">
</head>
<body style="margin:20;padding:0;">
<script language="javascript">
window.parent.document.title = "Adding and quiting services with chkconfig";
</script>
<div id="section">
<p id="postTitle"><a href="Adding%20and%20quiting%20services%20with%20chkconfig.html" id="alink">Adding and quiting services with chkconfig</a></p>
<span style="font-family: arial;"><span style="color: rgb(102, 0, 204);">This implementation of chkconfig was inspired by the chkconfig command present in the IRIX operating system. Rather than maintaining configuation information outside of the /etc/rc[0-6].d hierarchy, however, this version directly manages the symlinks in /etc/rc[0-6].d.</span><br /><br />In Redhat Linux you have a powerfull tool called chkconfig, you can list all the services with:</span><br /><span style="color: rgb(0, 153, 0);font-size:85%;"><span style="font-family: courier new;">chkconfig --list</span></span><br /><span style="font-family: arial;">To see the services started in runlevel 3:</span><br /><span style="color: rgb(0, 153, 0);font-size:85%;"><span style="font-family: courier new;">chkconfig --list | grep 3:on</span></span><br /><br /><span style="font-family: arial;">To turn off a service in all the runlevels:</span><br /><span style="font-size:85%;"><span style="font-family: courier new;">chkconfig pcmcia off</span></span><br /><br /><span style="font-family: arial;">Turn off a service in a desired runlevel:</span><span style="font-size:85%;"><br /><span style="font-family: courier new; color: rgb(0, 153, 0);">[root@monitor1]# chkconfig --list | grep hpoj</span><br /><span style="font-family: courier new; color: rgb(0, 153, 0);">hpoj 0:off 1:off 2:on 3:on 4:on 5:on 6:off</span><br /><span style="font-family: courier new; color: rgb(0, 153, 0);">[root@monitor1]# chkconfig --level 3 hpoj off</span><br /><span style="font-family: courier new; color: rgb(0, 153, 0);">[root@monitor1 rc3.d]# chkconfig --list | grep hpoj</span><br /><span style="font-family: courier new;"><span style="color: rgb(0, 153, 0);">hpoj 0:off 1:off 2:on 3:off 4:on 5:on 6:off</span><br /><br /><br />If you want to add a new service, you created the /etc/rc.d/init.d/ file and now you wans to manage the service, configure it to start and stop on desired runlevels.<br /><br />Edit the /etc/rc.d/init.d/service-name file, and add this line on the top:<br /></span></span> <pre><span style="color: rgb(0, 102, 0);">#!/bin/bash</span><br /><span style="color: rgb(0, 102, 0);"># chkconfig: 2345 55 25</span><br /><span style="color: rgb(0, 102, 0);"># description: A service that does powerful things</span><br /><span style="color: rgb(0, 102, 0);">#</span><span style="font-family: georgia,serif;"><br /><br /><span style="font-size:100%;"><span style="font-family: arial;">T</span></span><span style="font-size:100%;"><span style="font-family: arial;">his is a description of what this line does:</span></span><br /></span># chkconfig: 2345 55 25<br />             |   |  |<br />             |   |  priority for kill scripts<br />             |   |<br />             |   priority for start scripts<br />             |<br />             run levels at which to start service<br /><br /><span style="font-size:130%;"><span style="font-family: arial;">Then execute, for example, adding the qmail service:</span></span><br /><span style="color: rgb(0, 153, 0);">[root@monitor1 init.d]# chkconfig --add qmail</span><br /><span style="color: rgb(0, 153, 0);">[root@monitor1 init.d]# chkconfig --list qmail</span><br /><span style="color: rgb(0, 153, 0);">qmail           0:off   1:off   2:off   3:on    4:off   5:on    6:off</span><br /><span style="font-size:100%;"><br /><span style="font-family: arial;">Now configure it to start on desired runlevels !</span></span><br /><br /></pre><div style="clear: both;"></div>
<b>Published: Sunday, January 01, 2006</b>

</div>

<hr>
</body></html>
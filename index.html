<html>
<head>
<meta charset="utf-8" />
<title></title>
<style>#slider { margin: 10px; }  </style>
<script type="text/javascript" src="http://d3js.org/d3.v2.js"></script>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css " />
<script src="http://code.jquery.com/jquery-1.8.2.js "></script>
<script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js "></script>
<script>

var w = 300;
var h = 140;
var barWidth = 30;
var dataset = [ [5, 30, 65], [20, 45, 2], [20, 33, 88], 
[5, 30, 65], [20, 45, 2], [20, 33, 88], 
[5, 30, 65], [20, 45, 2], [20, 33, 88], 
[ 12, 13, 38],
[ 102, 83, 28] ];

function graficar (tam) {
	d3.select("svg").remove();
	var svg = d3.select("#chart1")
		.append("svg")
		.attr("height", h)
		.attr("width", w);

	svg.selectAll("rect")
		.data(dataset)
		.enter()
		.append("rect")
		.attr("x", function(d, i) { return (i * (w/3)); })
		.attr("y", function(d,i) { return (h - dataset[tam-2000][i]) })
		.attr("width", barWidth)
		.attr("height", function(d,i) { return dataset[tam-2000][i]; })
		.attr("fill", function(d,i) { return "rgb(0, 0, " + (dataset[tam-2000][i] * 20) + ")"; });

	svg.selectAll("text")
		.data(dataset)
		.enter()
		.append("text")
		.text(function(d,i) { return (dataset[tam-2000][i]); })
		.attr("text-anchor", "middle")
		.attr("x", function(d,i) { return ((i * (w/3))+(barWidth/2)); })
		.attr("y", function(d,i) { return (h - dataset[tam-2000][i]) })
		.attr("font-family", "sans-serif")
		.attr("font-size", "11px")
		.attr("fill", "black");
}


$(document).ready(function () {
	$( "#slider" ).slider({ max: 2010, min: 2000, step: 1,
		change: function (event, ui) { graficar( ui.value );
			$("#anio").html(ui.value);
		}
	});
	graficar(2000);
});
</script>

</head>

<body>
A&ntilde;o&nbsp;<div id="anio" style="display: inline;">2000</div>
<div id="slider" style="width: 400px;"></div>
<div id="chart1"></div>
</body>
</html>
